!function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery) }(function (jQuery) { "use strict"; var $ = jQuery; if (window.METRO_VERSION = "3.0.17", void 0 === jQuery) throw new Error("Metro's JavaScript requires jQuery"); void 0 === window.METRO_AUTO_REINIT && (window.METRO_AUTO_REINIT = !0), void 0 === window.METRO_LANGUAGE && (window.METRO_LANGUAGE = "en"), void 0 === window.METRO_LOCALE && (window.METRO_LOCALE = "EN_en"), void 0 === window.METRO_CURRENT_LOCALE && (window.METRO_CURRENT_LOCALE = "en"), void 0 === window.METRO_SHOW_TYPE && (window.METRO_SHOW_TYPE = "slide"), void 0 === window.METRO_DEBUG && (window.METRO_DEBUG = !0), void 0 === window.METRO_CALENDAR_WEEK_START && (window.METRO_CALENDAR_WEEK_START = 0), window.canObserveMutation = "MutationObserver" in window, Number.prototype.format = function (e, t, n, a) { var o = "\\d(?=(\\d{" + (t || 3) + "})+" + (e > 0 ? "\\D" : "$") + ")", i = this.toFixed(Math.max(0, ~~e)); return (a ? i.replace(".", a) : i).replace(new RegExp(o, "g"), "$&" + (n || ",")) }, Array.prototype.clone = function () { return this.slice(0) }, Array.prototype.unique = function () { for (var e = this.concat(), t = 0; t < e.length; ++t)for (var n = t + 1; n < e.length; ++n)e[t] === e[n] && e.splice(n--, 1); return e }, window.isTouchDevice = function () { return "ontouchstart" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0 }; var widget_uuid = 0, widget_slice = Array.prototype.slice, l; $.cleanData = (l = $.cleanData, function (e) { var t, n, a; for (a = 0; null != (n = e[a]); a++)try { (t = $._data(n, "events")) && t.remove && $(n).triggerHandler("remove") } catch (e) { } l(e) }), $.widget = function (e, t, n) { var a, o, i, r, s = {}, l = e.split(".")[0]; return e = e.split(".")[1], a = l + "-" + e, n || (n = t, t = $.Widget), $.expr[":"][a.toLowerCase()] = function (e) { return !!$.data(e, a) }, $[l] = $[l] || {}, o = $[l][e], i = $[l][e] = function (e, t) { if (!this._createWidget) return new i(e, t); arguments.length && this._createWidget(e, t) }, $.extend(i, o, { version: n.version, _proto: $.extend({}, n), _childConstructors: [] }), (r = new t).options = $.widget.extend({}, r.options), $.each(n, function (e, n) { var a, o; $.isFunction(n) ? s[e] = (a = function () { return t.prototype[e].apply(this, arguments) }, o = function (n) { return t.prototype[e].apply(this, n) }, function () { var e, t = this._super, i = this._superApply; return this._super = a, this._superApply = o, e = n.apply(this, arguments), this._super = t, this._superApply = i, e }) : s[e] = n }), i.prototype = $.widget.extend(r, { widgetEventPrefix: o && r.widgetEventPrefix || e }, s, { constructor: i, namespace: l, widgetName: e, widgetFullName: a }), o ? ($.each(o._childConstructors, function (e, t) { var n = t.prototype; $.widget(n.namespace + "." + n.widgetName, i, t._proto) }), delete o._childConstructors) : t._childConstructors.push(i), $.widget.bridge(e, i), i }, $.widget.extend = function (e) { for (var t, n, a = widget_slice.call(arguments, 1), o = 0, i = a.length; o < i; o++)for (t in a[o]) n = a[o][t], a[o].hasOwnProperty(t) && void 0 !== n && ($.isPlainObject(n) ? e[t] = $.isPlainObject(e[t]) ? $.widget.extend({}, e[t], n) : $.widget.extend({}, n) : e[t] = n); return e }, $.widget.bridge = function (e, t) { var n = t.prototype.widgetFullName || e; $.fn[e] = function (a) { var o = "string" == typeof a, i = widget_slice.call(arguments, 1), r = this; return o ? this.each(function () { var t, o = $.data(this, n); return "instance" === a ? (r = o, !1) : o ? $.isFunction(o[a]) && "_" !== a.charAt(0) ? (t = o[a].apply(o, i)) !== o && void 0 !== t ? (r = t && t.jquery ? r.pushStack(t.get()) : t, !1) : void 0 : $.error("no such method '" + a + "' for " + e + " widget instance") : $.error("cannot call methods on " + e + " prior to initialization; attempted to call method '" + a + "'") }) : (i.length && (a = $.widget.extend.apply(null, [a].concat(i))), this.each(function () { var e = $.data(this, n); e ? (e.option(a || {}), e._init && e._init()) : $.data(this, n, new t(a, this)) })), r } }, $.Widget = function () { }, $.Widget._childConstructors = [], $.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: !1, create: null }, _createWidget: function (e, t) { t = $(t || this.defaultElement || this)[0], this.element = $(t), this.uuid = widget_uuid++ , this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = $(), this.hoverable = $(), this.focusable = $(), t !== this && ($.data(t, this.widgetFullName, this), this._on(!0, this.element, { remove: function (e) { e.target === t && this.destroy() } }), this.document = $(t.style ? t.ownerDocument : t.document || t), this.window = $(this.document[0].defaultView || this.document[0].parentWindow)), this.options = $.widget.extend({}, this.options, this._getCreateOptions(), e), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init() }, _getCreateOptions: $.noop, _getCreateEventData: $.noop, _create: $.noop, _init: $.noop, destroy: function () { this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus") }, _destroy: $.noop, widget: function () { return this.element }, option: function (e, t) { var n, a, o, i = e; if (0 === arguments.length) return $.widget.extend({}, this.options); if ("string" == typeof e) if (i = {}, e = (n = e.split(".")).shift(), n.length) { for (a = i[e] = $.widget.extend({}, this.options[e]), o = 0; o < n.length - 1; o++)a[n[o]] = a[n[o]] || {}, a = a[n[o]]; if (e = n.pop(), 1 === arguments.length) return void 0 === a[e] ? null : a[e]; a[e] = t } else { if (1 === arguments.length) return void 0 === this.options[e] ? null : this.options[e]; i[e] = t } return this._setOptions(i), this }, _setOptions: function (e) { var t; for (t in e) this._setOption(t, e[t]); return this }, _setOption: function (e, t) { return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t), t && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this }, enable: function () { return this._setOptions({ disabled: !1 }) }, disable: function () { return this._setOptions({ disabled: !0 }) }, _on: function (e, t, n) { var a, o = this; "boolean" != typeof e && (n = t, t = e, e = !1), n ? (t = a = $(t), this.bindings = this.bindings.add(t)) : (n = t, t = this.element, a = this.widget()), $.each(n, function (n, i) { function r() { if (e || !0 !== o.options.disabled && !$(this).hasClass("ui-state-disabled")) return ("string" == typeof i ? o[i] : i).apply(o, arguments) } "string" != typeof i && (r.guid = i.guid = i.guid || r.guid || $.guid++); var s = n.match(/^([\w:-]*)\s*(.*)$/), l = s[1] + o.eventNamespace, d = s[2]; d ? a.delegate(d, l, r) : t.bind(l, r) }) }, _off: function (e, t) { t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t), this.bindings = $(this.bindings.not(e).get()), this.focusable = $(this.focusable.not(e).get()), this.hoverable = $(this.hoverable.not(e).get()) }, _delay: function (e, t) { var n = this; return setTimeout(function () { return ("string" == typeof e ? n[e] : e).apply(n, arguments) }, t || 0) }, _hoverable: function (e) { this.hoverable = this.hoverable.add(e), this._on(e, { mouseenter: function (e) { $(e.currentTarget).addClass("ui-state-hover") }, mouseleave: function (e) { $(e.currentTarget).removeClass("ui-state-hover") } }) }, _focusable: function (e) { this.focusable = this.focusable.add(e), this._on(e, { focusin: function (e) { $(e.currentTarget).addClass("ui-state-focus") }, focusout: function (e) { $(e.currentTarget).removeClass("ui-state-focus") } }) }, _trigger: function (e, t, n) { var a, o, i = this.options[e]; if (n = n || {}, (t = $.Event(t)).type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), t.target = this.element[0], o = t.originalEvent) for (a in o) a in t || (t[a] = o[a]); return this.element.trigger(t, n), !($.isFunction(i) && !1 === i.apply(this.element[0], [t].concat(n)) || t.isDefaultPrevented()) } }, $.each({ show: "fadeIn", hide: "fadeOut" }, function (e, t) { $.Widget.prototype["_" + e] = function (n, a, o) { "string" == typeof a && (a = { effect: a }); var i, r = a ? !0 === a || "number" == typeof a ? t : a.effect || t : e; "number" == typeof (a = a || {}) && (a = { duration: a }), i = !$.isEmptyObject(a), a.complete = o, a.delay && n.delay(a.delay), i && $.effects && $.effects.effect[r] ? n[e](a) : r !== e && n[r] ? n[r](a.duration, a.easing, o) : n.queue(function (t) { $(this)[e](), o && o.call(n[0]), t() }) } }); var widget = $.widget; $.fn.reverse = Array.prototype.reverse, $.Metro = { hotkeys: [], initWidgets: function (e) { $.each(e, function () { var e = $(this); e.data("role").split(/\s*,\s*/).map(function (t) { try { void 0 !== $.fn[t] && !0 !== e.data(t + "-initiated") && ($.fn[t].call(e), e.data(t + "-initiated", !0)) } catch (e) { window.METRO_DEBUG && console.log(e.message, e.stack) } }) }) }, initHotkeys: function (e) { $.each(e, function () { var e = $(this), t = e.data("hotkey").toLowerCase(); !0 !== e.data("hotKeyBonded") && ($.Metro.hotkeys.push(t), $(document).on("keyup", null, t, function (t) { if (void 0 !== e) return "A" === e[0].tagName && void 0 !== e.attr("href") && "" !== e.attr("href").trim() && "#" !== e.attr("href").trim() ? document.location.href = e.attr("href") : e.click(), !1 }), e.data("hotKeyBonded", !0)) }) }, init: function () { var e, t = $("[data-role]"), n = $("[data-hotkey]"); $.Metro.initHotkeys(n), $.Metro.initWidgets(t), e = { childList: !0, subtree: !0 }, new MutationObserver(function (e) { e.map(function (e) { if (e.addedNodes) for (var t, n, a, o, i = 0, r = e.addedNodes.length; i < r; i++)a = (t = $(e.addedNodes[i])).find("[data-role]"), o = t.find("[data-hotkey]"), $.Metro.initHotkeys(o), (n = void 0 !== t.data("role") ? $.merge(a, t) : a).length && $.Metro.initWidgets(n) }) }).observe(document, e) } }; var utils = { isColor: function (e) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e) }, isUrl: function (e) { return /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(this) }, secondsToFormattedString: function (e) { var t, n, a; return ((t = parseInt(e / 3600) % 24) ? t + ":" : "") + ((n = parseInt(e / 60) % 60) < 10 ? "0" + n : n) + ":" + ((a = e % 60) < 10 ? "0" + a : a) }, uniqueId: function (e) { var t = (new Date).getTime(); return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var n = (t + 16 * Math.random()) % 16 | 0; return t = Math.floor(t / 16), ("x" == e ? n : 3 & n | 8).toString(16) }) }, isTouchDevice: function () { return "ontouchstart" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0 }, arrayUnique: function (e) { for (var t = e.concat(), n = 0; n < t.length; ++n)for (var a = n + 1; a < t.length; ++a)t[n] === t[a] && t.splice(a--, 1); return t }, arrayClone: function (e) { return e.slice(0) }, arrayShuffle: function (e) { for (var t, n, a = e.length; 0 !== a;)n = Math.floor(Math.random() * a), t = e[a -= 1], e[a] = e[n], e[n] = t; return e }, hex2rgba: function (e, t) { var n; if (t = isNaN(t) ? 1 : t, /^#([A-Fa-f0-9]{3}){1,2}$/.test(e)) return 3 == (n = e.substring(1).split("")).length && (n = [n[0], n[0], n[1], n[1], n[2], n[2]]), "rgba(" + [(n = "0x" + n.join("")) >> 16 & 255, n >> 8 & 255, 255 & n].join(",") + "," + t + ")"; throw new Error("Hex2rgba error. Bad Hex value") }, random: function (e, t) { return Math.floor(Math.random() * (t - e + 1) + e) }, isInt: function (e) { return Number(e) === e && e % 1 == 0 }, isFloat: function (e) { return Number(e) === e && e % 1 != 0 } }; function keyHandler(e) { if ("string" == typeof e.data && (e.data = { keys: e.data }), e.data && e.data.keys && "string" == typeof e.data.keys) { var t = e.handler, n = e.data.keys.toLowerCase().split(" "); e.handler = function (e) { if (this === e.target || !($.hotkeys.options.filterInputAcceptingElements && $.hotkeys.textInputTypes.test(e.target.nodeName) || $.hotkeys.options.filterContentEditable && $(e.target).attr("contenteditable") || $.hotkeys.options.filterTextInputs && $.inArray(e.target.type, $.hotkeys.textAcceptingInputTypes) > -1)) { var a = "keypress" !== e.type && $.hotkeys.specialKeys[e.which], o = String.fromCharCode(e.which).toLowerCase(), i = "", r = {}; $.each(["alt", "ctrl", "shift"], function (t, n) { e[n + "Key"] && a !== n && (i += n + "+") }), e.metaKey && !e.ctrlKey && "meta" !== a && (i += "meta+"), e.metaKey && "meta" !== a && i.indexOf("alt+ctrl+shift+") > -1 && (i = i.replace("alt+ctrl+shift+", "hyper+")), a ? r[i + a] = !0 : (r[i + o] = !0, r[i + $.hotkeys.shiftNums[o]] = !0, "shift+" === i && (r[$.hotkeys.shiftNums[o]] = !0)); for (var s = 0, l = n.length; s < l; s++)if (r[n[s]]) return t.apply(this, arguments) } } } } $.metroUtils = window.metroUtils = utils, $.easing.jswing = $.easing.swing, $.extend($.easing, { def: "easeOutQuad", swing: function (e, t, n, a, o) { return $.easing[$.easing.def](e, t, n, a, o) }, easeInQuad: function (e, t, n, a, o) { return a * (t /= o) * t + n }, easeOutQuad: function (e, t, n, a, o) { return -a * (t /= o) * (t - 2) + n }, easeInOutQuad: function (e, t, n, a, o) { return (t /= o / 2) < 1 ? a / 2 * t * t + n : -a / 2 * (--t * (t - 2) - 1) + n }, easeInCubic: function (e, t, n, a, o) { return a * (t /= o) * t * t + n }, easeOutCubic: function (e, t, n, a, o) { return a * ((t = t / o - 1) * t * t + 1) + n }, easeInOutCubic: function (e, t, n, a, o) { return (t /= o / 2) < 1 ? a / 2 * t * t * t + n : a / 2 * ((t -= 2) * t * t + 2) + n }, easeInQuart: function (e, t, n, a, o) { return a * (t /= o) * t * t * t + n }, easeOutQuart: function (e, t, n, a, o) { return -a * ((t = t / o - 1) * t * t * t - 1) + n }, easeInOutQuart: function (e, t, n, a, o) { return (t /= o / 2) < 1 ? a / 2 * t * t * t * t + n : -a / 2 * ((t -= 2) * t * t * t - 2) + n }, easeInQuint: function (e, t, n, a, o) { return a * (t /= o) * t * t * t * t + n }, easeOutQuint: function (e, t, n, a, o) { return a * ((t = t / o - 1) * t * t * t * t + 1) + n }, easeInOutQuint: function (e, t, n, a, o) { return (t /= o / 2) < 1 ? a / 2 * t * t * t * t * t + n : a / 2 * ((t -= 2) * t * t * t * t + 2) + n }, easeInSine: function (e, t, n, a, o) { return -a * Math.cos(t / o * (Math.PI / 2)) + a + n }, easeOutSine: function (e, t, n, a, o) { return a * Math.sin(t / o * (Math.PI / 2)) + n }, easeInOutSine: function (e, t, n, a, o) { return -a / 2 * (Math.cos(Math.PI * t / o) - 1) + n }, easeInExpo: function (e, t, n, a, o) { return 0 == t ? n : a * Math.pow(2, 10 * (t / o - 1)) + n }, easeOutExpo: function (e, t, n, a, o) { return t == o ? n + a : a * (1 - Math.pow(2, -10 * t / o)) + n }, easeInOutExpo: function (e, t, n, a, o) { return 0 == t ? n : t == o ? n + a : (t /= o / 2) < 1 ? a / 2 * Math.pow(2, 10 * (t - 1)) + n : a / 2 * (2 - Math.pow(2, -10 * --t)) + n }, easeInCirc: function (e, t, n, a, o) { return -a * (Math.sqrt(1 - (t /= o) * t) - 1) + n }, easeOutCirc: function (e, t, n, a, o) { return a * Math.sqrt(1 - (t = t / o - 1) * t) + n }, easeInOutCirc: function (e, t, n, a, o) { return (t /= o / 2) < 1 ? -a / 2 * (Math.sqrt(1 - t * t) - 1) + n : a / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n }, easeInElastic: function (e, t, n, a, o) { var i = 1.70158, r = 0, s = a; return 0 == t ? n : 1 == (t /= o) ? n + a : (r || (r = .3 * o), s < Math.abs(a) ? (s = a, i = r / 4) : i = r / (2 * Math.PI) * Math.asin(a / s), -s * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * o - i) * (2 * Math.PI) / r) + n) }, easeOutElastic: function (e, t, n, a, o) { var i = 1.70158, r = 0, s = a; return 0 == t ? n : 1 == (t /= o) ? n + a : (r || (r = .3 * o), s < Math.abs(a) ? (s = a, i = r / 4) : i = r / (2 * Math.PI) * Math.asin(a / s), s * Math.pow(2, -10 * t) * Math.sin((t * o - i) * (2 * Math.PI) / r) + a + n) }, easeInOutElastic: function (e, t, n, a, o) { var i = 1.70158, r = 0, s = a; return 0 == t ? n : 2 == (t /= o / 2) ? n + a : (r || (r = o * (.3 * 1.5)), s < Math.abs(a) ? (s = a, i = r / 4) : i = r / (2 * Math.PI) * Math.asin(a / s), t < 1 ? s * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * o - i) * (2 * Math.PI) / r) * -.5 + n : s * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * o - i) * (2 * Math.PI) / r) * .5 + a + n) }, easeInBack: function (e, t, n, a, o, i) { return null == i && (i = 1.70158), a * (t /= o) * t * ((i + 1) * t - i) + n }, easeOutBack: function (e, t, n, a, o, i) { return null == i && (i = 1.70158), a * ((t = t / o - 1) * t * ((i + 1) * t + i) + 1) + n }, easeInOutBack: function (e, t, n, a, o, i) { return null == i && (i = 1.70158), (t /= o / 2) < 1 ? a / 2 * (t * t * ((1 + (i *= 1.525)) * t - i)) + n : a / 2 * ((t -= 2) * t * ((1 + (i *= 1.525)) * t + i) + 2) + n }, easeInBounce: function (e, t, n, a, o) { return a - $.easing.easeOutBounce(e, o - t, 0, a, o) + n }, easeOutBounce: function (e, t, n, a, o) { return (t /= o) < 1 / 2.75 ? a * (7.5625 * t * t) + n : t < 2 / 2.75 ? a * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : t < 2.5 / 2.75 ? a * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : a * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n }, easeInOutBounce: function (e, t, n, a, o) { return t < o / 2 ? .5 * $.easing.easeInBounce(e, 2 * t, 0, a, o) + n : .5 * $.easing.easeOutBounce(e, 2 * t - o, 0, a, o) + .5 * a + n } }), $.hotkeys = { version: "0.8", specialKeys: { 8: "backspace", 9: "tab", 10: "return", 13: "return", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause", 20: "capslock", 27: "esc", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home", 37: "left", 38: "up", 39: "right", 40: "down", 45: "insert", 46: "del", 59: ";", 61: "=", 96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6", 103: "7", 104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".", 111: "/", 112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5", 117: "f6", 118: "f7", 119: "f8", 120: "f9", 121: "f10", 122: "f11", 123: "f12", 144: "numlock", 145: "scroll", 173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\", 221: "]", 222: "'" }, shiftNums: { "`": "~", 1: "!", 2: "@", 3: "#", 4: "$", 5: "%", 6: "^", 7: "&", 8: "*", 9: "(", 0: ")", "-": "_", "=": "+", ";": ": ", "'": '"', ",": "<", ".": ">", "/": "?", "\\": "|" }, textAcceptingInputTypes: ["text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime", "datetime-local", "search", "color", "tel"], textInputTypes: /textarea|input|select/i, options: { filterInputAcceptingElements: !0, filterTextInputs: !0, filterContentEditable: !0 } }, $.each(["keydown", "keyup", "keypress"], function () { $.event.special[this] = { add: keyHandler } }); var toFix = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], toBind = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], lowestDelta, lowestDeltaXY; if ($.event.fixHooks) for (var i = toFix.length; i;)$.event.fixHooks[toFix[--i]] = $.event.mouseHooks; function handler(e) { var t, n, a, o = e || window.event, i = [].slice.call(arguments, 1), r = 0, s = 0, l = 0; return (e = $.event.fix(o)).type = "mousewheel", o.wheelDelta && (r = o.wheelDelta), o.detail && (r = -1 * o.detail), o.deltaY && (r = l = -1 * o.deltaY), o.deltaX && (r = -1 * (s = o.deltaX)), void 0 !== o.wheelDeltaY && (l = o.wheelDeltaY), void 0 !== o.wheelDeltaX && (s = -1 * o.wheelDeltaX), t = Math.abs(r), (!lowestDelta || t < lowestDelta) && (lowestDelta = t), n = Math.max(Math.abs(l), Math.abs(s)), (!lowestDeltaXY || n < lowestDeltaXY) && (lowestDeltaXY = n), a = r > 0 ? "floor" : "ceil", r = Math[a](r / lowestDelta), s = Math[a](s / lowestDeltaXY), l = Math[a](l / lowestDeltaXY), i.unshift(e, r, s, l), ($.event.dispatch || $.event.handle).apply(this, i) } function preCode(e) { Array.prototype.slice.call(document.querySelectorAll(e), 0).forEach(function (e, t, n) { var a = e.textContent.replace(/^[\r\n]+/, "").replace(/\s+$/g, ""); if (/^\S/gm.test(a)) e.textContent = a; else { for (var o, i, r, s = /^[\t ]+/gm, l = 1e3; o = s.exec(a);)(r = o[0].length) < l && (l = r, i = o[0]); 1e3 != l && (e.textContent = a.replace(new RegExp("^" + i, "gm"), "")) } }) } $.event.special.mousewheel = { setup: function () { if (this.addEventListener) for (var e = toBind.length; e;)this.addEventListener(toBind[--e], handler, !1); else this.onmousewheel = handler }, teardown: function () { if (this.removeEventListener) for (var e = toBind.length; e;)this.removeEventListener(toBind[--e], handler, !1); else this.onmousewheel = null } }, $.fn.extend({ mousewheel: function (e) { return e ? this.bind("mousewheel", e) : this.trigger("mousewheel") }, unmousewheel: function (e) { return this.unbind("mousewheel", e) } }), document.addEventListener("DOMContentLoaded", function () { preCode("pre code, textarea") }, !1); var hasTouch = "ontouchend" in window, eventTimer, moveDirection = "undefined", startX, startY, deltaX, deltaY, mouseDown = !1, addTouchEvents = function (e) { hasTouch && (e.addEventListener("touchstart", touch2Mouse, !0), e.addEventListener("touchmove", touch2Mouse, !0), e.addEventListener("touchend", touch2Mouse, !0)) }; function touch2Mouse(e) { var t, n = e.changedTouches[0]; switch (e.type) { case "touchstart": t = "mousedown"; break; case "touchend": t = "mouseup"; break; case "touchmove": t = "mousemove"; break; default: return }"mousedown" == t && (eventTimer = (new Date).getTime(), startX = n.clientX, startY = n.clientY, mouseDown = !0), "mouseup" == t && ((new Date).getTime() - eventTimer <= 500 ? t = "click" : (new Date).getTime() - eventTimer > 1e3 && (t = "longclick"), eventTimer = 0, mouseDown = !1), "mousemove" == t && mouseDown && (deltaX = n.clientX - startX, deltaY = n.clientY - startY, moveDirection = deltaX > deltaY ? "horizontal" : "vertical"); var a = document.createEvent("MouseEvent"); a.initMouseEvent(t, !0, !0, window, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), n.target.dispatchEvent(a), e.preventDefault() } var TemplateEngine = function (e, t) { for (var n, a, o = /<%(.+?)%>/g, i = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g, r = "with(obj) { var r=[];\n", s = 0, l = function (e, t) { return r += t ? e.match(i) ? e + "\n" : "r.push(" + e + ");\n" : "" != e ? 'r.push("' + e.replace(/"/g, '\\"') + '");\n' : "", l }; a = o.exec(e);)l(e.slice(s, a.index))(a[1], !0), s = a.index + a[0].length; l(e.substr(s, e.length - s)), r = (r + 'return r.join(""); }').replace(/[\r\t\n]/g, " "); try { n = new Function("obj", r).apply(t, [t]) } catch (e) { console.error("'" + e.message + "'", " in \n\nCode:\n", r, "\n") } return n }; window.metroTemplate = TemplateEngine, $.Template = TemplateEngine, $(window).on("resize", function () { $("[data-role=appbar]:not(.no-flexible)").each(function () { $(this).data("appbar").resize() }) }), $(window).on("load", function () { $("[data-role=appbar]:not(.no-flexible)").each(function () { $(this).data("appbar").resize() }) }), $("[data-role=appbar]:not(.no-flexible) [src]").on("load", function () { $(this).closest("[data-role=appbar]").data("appbar").resize() }); var metroCharm = { isOpened: function (e) { var t, n = $(e); return 0 == n.length ? (console.log("Charm " + e + " not found!"), !1) : null == (t = n.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : !0 === t.element.data("opened") }, show: function (e, t) { var n, a = $(e); return 0 == a.length ? (console.log("Charm " + e + " not found!"), !1) : null == (n = a.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : (null != t && (a.hide(), a.data("displayed", !1), a.data("opened", !1), n.options.position = t), n.open(), !1) }, hide: function (e) { var t, n = $(e); return 0 == n.length ? (console.log("Charm " + e + " not found!"), !1) : null == (t = n.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : void t.close() }, close: function (e) { return this.show(e) }, toggle: function (e, t) { var n, a = $(e); return 0 == a.length ? (console.log("Charm " + e + " not found!"), !1) : null == (n = a.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : void (!0 === n.element.data("opened") ? n.close() : (null != t && (a.hide(), a.data("displayed", !1), a.data("opened", !1), n.options.position = t), n.open())) } }; return $.Charm = window.metroCharm = metroCharm, window.metroCharmIsOpened = function (e) { var t, n = $(e); return 0 == n.length ? (console.log("Charm " + e + " not found!"), !1) : null == (t = n.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : !0 === t.element.data("opened") }, window.showMetroCharm = function (e, t) { var n, a = $(e); return 0 == a.length ? (console.log("Charm " + e + " not found!"), !1) : null == (n = a.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : (null != t && (a.hide(), a.data("displayed", !1), a.data("opened", !1), n.options.position = t), n.open(), !1) }, window.hideMetroCharm = function (e) { var t, n = $(e); return 0 == n.length ? (console.log("Charm " + e + " not found!"), !1) : null == (t = n.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : void t.close() }, window.toggleMetroCharm = function (e, t) { var n, a = $(e); return 0 == a.length ? (console.log("Charm " + e + " not found!"), !1) : null == (n = a.data("charm")) ? (console.log('Element not contain role charm! Please add attribute data-role="charm" to element ' + e), !1) : void (!0 === n.element.data("opened") ? n.close() : (null != t && (a.hide(), a.data("displayed", !1), a.data("opened", !1), n.options.position = t), n.open())) }, $.widget("metro.treeview", { version: "3.0.0", options: { doubleClick: !0, onClick: function (e, t, n, a) { }, onInputClick: function (e, t, n, a) { }, onExpand: function (e, t, n, a) { }, onCollapse: function (e, t, n, a) { } }, _create: function () { var e = this.element, t = this.options; $.each(e.data(), function (e, n) { if (e in t) try { t[e] = $.parseJSON(n) } catch (a) { t[e] = n } }), this._initTree(), this._createEvents(), e.data("treeview", this) }, _createCheckbox: function (e, t) { var n, a; n = $("<label/>").addClass("input-control checkbox small-check").insertBefore(e), a = $("<input/>").attr("type", "checkbox").appendTo(n), $("<span/>").addClass("check").appendTo(n), void 0 !== t.data("name") && a.attr("name", t.data("name")), void 0 !== t.data("id") && a.attr("id", t.data("id")), void 0 !== t.data("checked") && a.prop("checked", t.data("checked")), void 0 !== t.data("readonly") && a.prop("disabled", t.data("readonly")), void 0 !== t.data("disabled") && (a.prop("disabled", t.data("disabled")), !0 === t.data("disabled") && t.addClass("disabled")), void 0 !== t.data("value") && a.val(t.data("value")) }, _createRadio: function (e, t) { var n, a; n = $("<label/>").addClass("input-control radio small-check").insertBefore(e), a = $("<input/>").attr("type", "radio").appendTo(n), $("<span/>").addClass("check").appendTo(n), void 0 !== t.data("name") && a.attr("name", t.data("name")), void 0 !== t.data("id") && a.attr("id", t.data("id")), void 0 !== t.data("checked") && a.prop("checked", t.data("checked")), void 0 !== t.data("readonly") && a.prop("disabled", t.data("readonly")), void 0 !== t.data("disabled") && (a.prop("disabled", t.data("disabled")), !0 === t.data("disabled") && t.addClass("disabled")), void 0 !== t.data("value") && a.val(t.data("value")) }, _initTree: function () { var e = this, t = this.element, n = (this.options, t.find(".leaf")); $.each(n, function () { var t = $(this), n = t.parent("li"), a = t.siblings("ul"); $(t.parents(".node")[0]); "checkbox" === n.data("mode") && e._createCheckbox(t, n), "radio" === n.data("mode") && e._createRadio(t, n), a.length > 0 && (n.hasClass("node") || n.addClass("node")), n.hasClass("collapsed") && a.hide() }) }, _renderChecks: function (e) { var t = this.element, n = (this.options, e.is(":checked")); $(e.parent().parent()).children("ul").find('[type="checkbox"]').prop("checked", n).removeClass("indeterminate"), $.each(t.find(".node[data-mode=checkbox]").reverse(), function () { var e = $(this), t = e.children(".input-control").find('[type="checkbox"]'), n = e.children("ul").find('[type="checkbox"]'), a = e.children("ul").find('[type="checkbox"]:checked'); t.removeClass("indeterminate"), 0 === a.length ? (t.prop("checked", !1), t.removeClass("indeterminate")) : a.length > 0 && n.length > a.length && (t.prop("checked", !0), t.addClass("indeterminate")) }) }, _createEvents: function () { var that = this, element = this.element, o = this.options; element.on("change", "input:checkbox", function () { that._renderChecks($(this)) }), element.on("click", "input", function () { var leaf = $(this), node = $(leaf.parents(".node")[0]), parent = leaf.parent("li"), check = leaf.siblings(".input-control").find("input:checkbox"), radio = leaf.siblings(".input-control").find("input:radio"), new_check_state, check_disabled; if (check.length > 0 && (new_check_state = !check.is(":checked"), check_disabled = check.is(":disabled"), check_disabled || check.prop("checked", new_check_state), that._renderChecks(check)), radio.length > 0 && (check_disabled = radio.is(":disabled"), check_disabled || radio.prop("checked", !0)), "function" == typeof o.onInputClick) o.onInputClick(leaf, parent, node, that); else if ("function" == typeof window[o.onInputClick]) window[o.onInputClick](leaf, parent, node, that); else { var result = eval("(function(){" + o.onInputClick + "})"); result.call(leaf, parent, node, that) } }), element.on("click", ".leaf", function () { var leaf = $(this), node = $(leaf.parents(".node")[0]), parent = leaf.parent("li"); if (element.find(".leaf").parent("li").removeClass("active"), parent.addClass("active"), "function" == typeof o.onClick) o.onClick(leaf, parent, node, that); else if ("function" == typeof window[o.onClick]) window[o.onClick](leaf, parent, node, that); else { var result = eval("(function(){" + o.onClick + "})"); result.call(leaf, parent, node, that) } }), o.doubleClick && element.on("dblclick", ".leaf", function (e) { var leaf = $(this), parent = leaf.parent("li"), node = $(leaf.parents(".node")[0]), result; if (parent.hasClass("keep-open")) return !1; parent.toggleClass("collapsed"), parent.hasClass("collapsed") ? (parent.children("ul").fadeOut("fast"), "function" == typeof o.onCollapse ? o.onCollapse(parent, leaf, node, that) : "function" == typeof window[o.onCollapse] ? window[o.onCollapse](parent, leaf, node, that) : (result = eval("(function(){" + o.onCollapse + "})"), result.call(parent, leaf, node, that))) : (parent.children("ul").fadeIn("fast"), "function" == typeof o.onExpand ? o.onExpand(parent, leaf, node, that) : "function" == typeof window[o.onExpand] ? window[o.onExpand](parent, leaf, node, that) : (result = eval("(function(){" + o.onExpand + "})"), result.call(parent, leaf, node, that))), e.stopPropagation(), e.preventDefault() }), element.on("click", ".node-toggle", function (e) { var leaf = $(this).siblings(".leaf"), parent = $(this).parent("li"), node = $(leaf.parents(".node")[0]), result; if (parent.hasClass("keep-open")) return !1; parent.toggleClass("collapsed"), parent.hasClass("collapsed") ? (parent.children("ul").fadeOut("fast"), "function" == typeof o.onCollapse ? o.onCollapse(parent, leaf, node, that) : "function" == typeof window[o.onCollapse] ? window[o.onCollapse](parent, leaf, node, that) : (result = eval("(function(){" + o.onCollapse + "})"), result.call(parent, leaf, node, that))) : (parent.children("ul").fadeIn("fast"), "function" == typeof o.onExpand ? o.onExpand(parent, leaf, node, that) : "function" == typeof window[o.onExpand] ? window[o.onExpand](parent, leaf, node, that) : (result = eval("(function(){" + o.onExpand + "})"), result.call(parent, leaf, node, that))), e.stopPropagation(), e.preventDefault() }) }, addLeaf: function (e, t, n) { var a, o, i, r = this.element; if (e && ("LI" === e[0].tagName && e.addClass("node"), 0 === e.children(".node-toggle").length && $("<span/>").addClass("node-toggle").appendTo(e)), 0 === (i = e ? $(e).children("ul") : r.children("ul")).length && (i = $("<ul/>").appendTo(e || r)), o = $("<li/>").appendTo(i), (a = void 0 !== n && void 0 !== n.tagName ? $("<" + n.tagName + "/>").addClass("leaf").appendTo(o) : $("<span/>").addClass("leaf").appendTo(o)).html(t), void 0 !== n && ($.each(n, function (e, t) { o.attr("data-" + e, t) }), void 0 !== n.mode)) switch (n.mode) { case "checkbox": this._createCheckbox(a, o); break; case "radio": this._createRadio(a, o) }return o }, _destroy: function () { }, _setOption: function (e, t) { this._super("_setOption", e, t) } }), $.Metro.init() });